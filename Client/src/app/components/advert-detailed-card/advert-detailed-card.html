<div class="advert-card card">
  <!-- Bouton de suppression -->
  <button class="delete-btn" (click)="deleteAdvert(advert.id)">✖</button>

  <h4>{{ advert.title }}</h4>
  <p>{{ advert.desc }}</p>
  <span class="status">{{ advert.advertStatus || 'Brouillon' }}</span>

  <p><strong>Type :</strong> {{ advert.advertType }}</p>
  <p><strong>Publié par :</strong> {{ advert.publisher?.firstName }} {{ advert.publisher?.lastName }}</p>

  <div class="applications-section">
    <h5>Personnes ayant postulé:</h5>

    @if (loadingApplications()) {
      <div>Chargement des candidatures...</div>
    }

    @if (!loadingApplications() && applications().length === 0) {
      <div>Aucune candidature.</div>
    }

    <ul>
      @for (app of applications(); track app.id) {
        <li>
          {{ app.applicant?.firstName }} {{ app.applicant?.lastName }} ({{ app.applicant?.email }})
          <button class="accept-btn" (click)="acceptApplication(app)">
            <img src="icons/validate_icon.svg" alt="Valider" />
          </button>
          <button class="reject-btn" (click)="rejectApplication(app)">
            <img src="icons/cancel_icon.svg" alt="Refuser" />
          </button>
        </li>
      } @empty {
        <li>Aucune candidature.</li>
      }
    </ul>

    @if (error()) {
      <div class="error">{{ error() }}</div>
    }
  </div>
</div>
